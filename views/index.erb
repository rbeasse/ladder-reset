<% game_releases.each do |release| %>
  <% is_simple_release = release['type'] == 'release' %>
  <div class="bg-catppuccin-mantle p-2 mb-2 border border-catppuccin-blue release-block relative" data-target="<%= release['time'] %>">
    <% if release['background'] %>
      <div class="absolute inset-0 opacity-20" style="background-image: url('<%= release['background'] %>'); background-size: cover; background-position: center; pointer-events: none;"></div>
    <% end %>
    <div class="relative z-10">
    <% if !is_simple_release %>
      <div class="flex justify-between items-start mb-4 h-full">
        <div class="mr-4">
          <span class="font-bold text-xl leading-none uppercase block -mt-0.5"><%= release['name'] %></span>
          <p class="text-sm text-catppuccin-subtext0"><%= release['title']%></p>
        </div>

        <div class="text-right">
          <p class="bg-catppuccin-surface0 text-sm px-1 py-0.5 local-time whitespace-nowrap" title="<%= release['time'] %>"><%= release['time'] %></p>
        </div>
      </div>
      
      <div class="flex justify-between items-end mt-8">
        <div class="flex flex-wrap gap-2 mr-4">
        <% release['buttons'].each do |button_key, button_data| %>
          <%= button(button_key, button_data['url'], icon: button_data['icon']) %>
        <% end %>
        </div>

        <div class="countdown text-right whitespace-nowrap" data-time="<%= release['time'] %>">
          <span class="text-xl font-bold leading-none block"></span>
        </div>
      </div>
    <% else %>
      <div class="flex justify-between items-center">
        <div>
          <span class="font-bold text-xl leading-none uppercase block -mt-0.5"><%= release['name'] %></span>
          <p class="text-sm text-catppuccin-subtext0"><%= release['title']%></p>
        </div>

        <div class="text-right">
          <p class="bg-catppuccin-surface0 text-sm px-1 py-0.5 local-time whitespace-nowrap" title="<%= release['time'] %>"><%= release['time'] %></p>
        </div>
      </div>
    <% end %>
    </div>
  </div>
<% end %>
